---
/bookings:
  get:
    operationId: listBookings
    parameters:
      - description: Case insensative search on booking biblio_id
        in: query
        name: biblio_id
        required: false
        type: string
      - description: Case insensative search on booking item_id
        in: query
        name: item_id
        required: false
        type: string
      - description: Case insensative search on booking patron_id
        in: query
        name: patron_id
        required: false
        type: string
      - description: Case Insensative search on booking start_date
        in: query
        name: start_date
        required: false
        type: string
      - description: Case Insensative search on booking end_date
        in: query
        name: end_date
        required: false
        type: string
      - $ref: ../parameters.json#/match
      - $ref: ../parameters.json#/order_by
      - $ref: ../parameters.json#/page
      - $ref: ../parameters.json#/per_page
      - $ref: ../parameters.json#/q_param
      - $ref: ../parameters.json#/q_body
      - $ref: ../parameters.json#/q_header
    produces:
      - application/json
    responses:
      200:
        description: A list of bookings
        schema:
          items:
            $ref: ../definitions.json#/booking
          type: array
      403:
        description: Access forbidden
        schema:
          $ref: ../definitions.json#/error
      500:
        description: Internal error
        schema:
          $ref: ../definitions.json#/error
      503:
        description: Under maintenance
        schema:
          $ref: ../definitions.json#/error
    summary: List bookings
    tags:
      - bookings
    x-koha-authorization:
      permissions:
        catalogue: 1
    x-mojo-to: Bookings#list
    x-koha-embed:
      - biblio
      - item
      - patron
  post:
    operationId: addBooking
    parameters:
      - description: A JSON object containing informations about the new booking
        in: body
        name: body
        required: true
        schema:
          $ref: ../definitions.json#/booking
    produces:
      - application/json
    responses:
      201:
        description: Booking added
        schema:
          $ref: ../definitions.json#/booking
      400:
        description: Client error
        schema:
          $ref: ../definitions.json#/error
      401:
        description: Authentication required
        schema:
          $ref: ../definitions.json#/error
      403:
        description: Access forbidden
        schema:
          $ref: ../definitions.json#/error
      500:
        description: Internal error
        schema:
          $ref: ../definitions.json#/error
      503:
        description: Under maintenance
        schema:
          $ref: ../definitions.json#/error
    summary: Add booking
    tags:
      - bookings
    x-koha-authorization:
      permissions:
        parameters: manage_bookings
    x-mojo-to: Bookings#add
'/bookings/{booking_id}':
  delete:
    operationId: deleteBooking
    parameters:
      - $ref: ../parameters.json#/booking_id_pp
    produces:
      - application/json
    responses:
      204:
        description: Booking deleted
      401:
        description: Authentication required
        schema:
          $ref: ../definitions.json#/error
      403:
        description: Access forbidden
        schema:
          $ref: ../definitions.json#/error
      404:
        description: Booking not found
        schema:
          $ref: ../definitions.json#/error
      500:
        description: Internal error
        schema:
          $ref: ../definitions.json#/error
      503:
        description: Under maintenance
        schema:
          $ref: ../definitions.json#/error
    summary: Delete booking
    tags:
      - bookings
    x-koha-authorization:
      permissions:
        parameters: manage_bookings
    x-mojo-to: Bookings#delete
  get:
    operationId: getBooking
    parameters:
      - $ref: ../parameters.json#/booking_id_pp
    produces:
      - application/json
    responses:
      200:
        description: A booking
        schema:
          $ref: ../definitions.json#/booking
      404:
        description: Booking not found
        schema:
          $ref: ../definitions.json#/error
      500:
        description: Internal error
        schema:
          $ref: ../definitions.json#/error
      503:
        description: Under maintenance
        schema:
          $ref: ../definitions.json#/error
    summary: Get booking
    tags:
      - bookings
    x-koha-authorization:
      permissions:
        catalogue: 1
    x-mojo-to: Bookings#get
  put:
    operationId: updateBooking
    parameters:
      - $ref: ../parameters.json#/booking_id_pp
      - description: A booking object
        in: body
        name: body
        required: true
        schema:
          $ref: ../definitions.json#/booking
    produces:
      - application/json
    responses:
      200:
        description: A booking
        schema:
          $ref: ../definitions.json#/booking
      400:
        description: Client error
        schema:
          $ref: ../definitions.json#/error
      401:
        description: Authentication required
        schema:
          $ref: ../definitions.json#/error
      403:
        description: Access forbidden
        schema:
          $ref: ../definitions.json#/error
      404:
        description: Booking not found
        schema:
          $ref: ../definitions.json#/error
      500:
        description: Internal error
        schema:
          $ref: ../definitions.json#/error
      503:
        description: Under maintenance
        schema:
          $ref: ../definitions.json#/error
    summary: Update booking
    tags:
      - bookings
    x-koha-authorization:
      permissions:
        parameters: manage_bookings
    x-mojo-to: Bookings#update
