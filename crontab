# Edit this file to introduce tasks to be run by cron.
# 
# Each task to run has to be defined through a single line
# indicating with different fields when the task will be run
# and what command to run for the task
# 
# To define the time you can provide concrete values for
# minute (m), hour (h), day of month (dom), month (mon),
# and day of week (dow) or use '*' in these fields (for 'any').
# 
# Notice that tasks will be started based on the cron's system
# daemon's notion of time and timezones.
# 
# Output of the crontab jobs (including errors) is sent through
# email to the user the crontab file belongs to (unless redirected).
# 
# For example, you can run a backup of all your user accounts
# at 5 a.m every week with:
# 0 5 * * 1 tar -zcf /var/backups/home.tgz /home/
# 
# For more information see the manual pages of crontab(5) and cron(8)
# 
# m h  dom mon dow   command

KOHA_CONF=/etc/koha/sites/kss/koha-conf.xml
PERL5LIB=/usr/share/koha/lib

*/15 * * * * /usr/share/koha/bin/cronjobs/process_message_queue.pl --code ILL_PARTNER_REQ --code ILL_REQUEST_UNAVAIL --code CHECKIN --code CHECKOUT --code DUEDGST --code WELCOME --code MEMBERSHIP_EXPIRY --code PASSWORD_RESET --code AUTO_RENEWALS_DGST --code RENEWAL --code ODUE --code ODUE2 --code ODUE3 --code HOLD_REMINDER --code NEW_SUGGESTION --code TO_PROCESS --code NOTIFY_MANAGER --code ACCEPTED --code AVAILABLE --code ORDERED --code REJECTED --code 2FA_ENABLE --code 2FA_DISABLE --code PREDUEDGST --code PEP_EMAILER --code PEP_USERANNOUCEMENT

30 6 * * * /usr/share/koha/bin/cronjobs/process_message_queue.pl --code LIBCHANGESBRP
30 6 * * * /usr/share/koha/bin/cronjobs/process_message_queue.pl --code LIBCHANGESHS
30 6 * * * /usr/share/koha/bin/cronjobs/process_message_queue.pl --code LIBCHANGESBR
30 6 * * * /usr/share/koha/bin/cronjobs/process_message_queue.pl --code LIBCHANGESBN
30 6 * * * /usr/share/koha/bin/cronjobs/process_message_queue.pl --code LIBCHANGEMD
30 6 * * * /usr/share/koha/bin/cronjobs/process_message_queue.pl --code LIBCHANGEKMS
30 6 * * * /usr/share/koha/bin/cronjobs/process_message_queue.pl --code LIBCHANGEGU
30 6 * * * /usr/share/koha/bin/cronjobs/process_message_queue.pl --code LIBCHANGEKTW
30 6 * * * /usr/share/koha/bin/cronjobs/process_message_queue.pl --code LIBCHANGEALL
30 6 * * * /usr/share/koha/bin/cronjobs/process_message_queue.pl --code MEMBERFLLWP_KMS
30 6 * * * /usr/share/koha/bin/cronjobs/process_message_queue.pl --code MEMBERFLLWP_KTW

0 10,15 * * * /usr/share/koha/bin/cronjobs/process_message_queue.pl --code HOLD
0 10,15 * * * /usr/share/koha/bin/cronjobs/process_message_queue.pl --code ILL_PICKUP_READY

#Emailing reports
10 8 * * * /usr/share/koha/bin/cronjobs/runreport.pl --to='rsc-tr.library@nhs.net' --subject='GU users with items 6 weeks overdue' -a --format=csv --csv-header 85 >/dev/null 2>&1
11 8 * * * /usr/share/koha/bin/cronjobs/runreport.pl --to='esht.libraryservices@nhs.net' --subject='SBN users with items 6 weeks overdue' -a --format=csv --csv-header 89 >/dev/null 2>&1
12 8 * * * /usr/share/koha/bin/cronjobs/runreport.pl --to='esht.libraryservices@nhs.net' --subject='SHS users with items 6 weeks overdue' -a --format=csv --csv-header 90 >/dev/null 2>&1
13 8 * * * /usr/share/koha/bin/cronjobs/runreport.pl --to='uhsussex.dunhill.library@nhs.net' --subject='CR users with items 6 weeks overdue' -a --format=csv --csv-header 91 >/dev/null 2>&1
14 8 * * * /usr/share/koha/bin/cronjobs/runreport.pl --to='uhsussex.libraryworthing@nhs.net' --subject='WO users with items 6 weeks overdue' -a --format=csv --csv-header 92 >/dev/null 2>&1
15 8 * * * /usr/share/koha/bin/cronjobs/runreport.pl --to='library.dvh@nhs.net' --subject='DVH users with items 6 weeks overdue' -a --format=csv --csv-header 93 >/dev/null 2>&1
16 8 * * * /usr/share/koha/bin/cronjobs/runreport.pl --to='library.esh@nhs.netâ€™ --subject='ES users with items 6 weeks overdue' -a --format=csv --csv-header 94 >/dev/null 2>&1
17 8 * * * /usr/share/koha/bin/cronjobs/runreport.pl --to='librarycrawley@nhs.net' --subject='ESC users with items 6 weeks overdue' -a --format=csv --csv-header 95 >/dev/null 2>&1
18 8 * * * /usr/share/koha/bin/cronjobs/runreport.pl --to='ekh-tr.kchlibrary@nhs.net' --subject='KCH users with items 6 weeks overdue' -a --format=csv --csv-header 96 >/dev/null 2>&1
19 8 * * * /usr/share/koha/bin/cronjobs/runreport.pl --to='ekh-tr.qeqmlibrary@nhs.net' --subject='KMA users with items 6 weeks overdue' -a --format=csv --csv-header 97 >/dev/null 2>&1
20 8 * * * /usr/share/koha/bin/cronjobs/runreport.pl --to='ekh-tr.whhlibrary@nhs.net' --subject='KWH users with items 6 weeks overdue' -a --format=csv --csv-header 98 >/dev/null 2>&1
21 8 * * * /usr/share/koha/bin/cronjobs/runreport.pl --to='mtw-tr.library@nhs.net' --subject='KMS users with items 6 weeks overdue' -a --format=csv --csv-header 99 >/dev/null 2>&1
22 8 * * * /usr/share/koha/bin/cronjobs/runreport.pl --to='mtw-tr.library@nhs.net' --subject='KTW users with items 6 weeks overdue' -a --format=csv --csv-header 100 >/dev/null 2>&1
23 8 * * * /usr/share/koha/bin/cronjobs/runreport.pl --to='UHSussex.library@nhs.net' --subject='MD users with items 6 weeks overdue' -a --format=csv --csv-header 101 >/dev/null 2>&1
24 8 * * * /usr/share/koha/bin/cronjobs/runreport.pl --to='UHSussex.library@nhs.net' --subject='SBR users with items 6 weeks overdue' -a --format=csv --csv-header 102 >/dev/null 2>&1
25 8 * * * /usr/share/koha/bin/cronjobs/runreport.pl --to='UHSussex.library@nhs.net' --subject='SBRP users with items 6 weeks overdue' -a --format=csv --csv-header 103 >/dev/null 2>&1
26 8 * * * /usr/share/koha/bin/cronjobs/runreport.pl --to='asp-tr.library@nhs.net' --subject='SPH users with items 6 weeks overdue' -a --format=csv --csv-header 104 >/dev/null 2>&1
27 8 * * * /usr/share/koha/bin/cronjobs/runreport.pl --to='trust.library@nhs.net' --subject='KMD users with items 6 weeks overdue' -a --format=csv --csv-header 105 >/dev/null 2>&1
28 8 * * * /usr/share/koha/bin/cronjobs/runreport.pl --to='qvh.library@nhs.net --subject='QVH users with items 6 weeks overdue' -a --format=csv --csv-header 106 >/dev/null 2>&1


0 3 * * 3 /usr/share/koha/bin/cronjobs/runreport.pl --to='uhsussex.libraryworthing@nhs.net' --subject='Borrowers moved from WO in past 7 days' -a --format=csv --csv-header 162 >/dev/null 2>&1
1 3 * * 3 /usr/share/koha/bin/cronjobs/runreport.pl --to='asp-tr.library@nhs.net' --subject='Borrowers moved from SPH in past 7 days' -a --format=csv --csv-header 161 >/dev/null 2>&1
2 3 * * 3 /usr/share/koha/bin/cronjobs/runreport.pl --to='esht.libraryservices@nhs.net' --subject='Borrowers moved from SHS in past 7 days' -a --format=csv --csv-header 160 >/dev/null 2>&1
3 3 * * 3 /usr/share/koha/bin/cronjobs/runreport.pl --to='UHSussex.library@nhs.net' --subject='Borrowers moved from SBRP in past 7 days' -a --format=csv --csv-header 159 >/dev/null 2>&1
4 3 * * 3 /usr/share/koha/bin/cronjobs/runreport.pl --to='UHSussex.library@nhs.net' --subject='Borrowers moved from SBR in past 7 days' -a --format=csv --csv-header 158 >/dev/null 2>&1
5 3 * * 3 /usr/share/koha/bin/cronjobs/runreport.pl --to='esht.libraryservices@nhs.net' --subject='Borrowers moved from SBN in past 7 days' -a --format=csv --csv-header 157 >/dev/null 2>&1
6 3 * * 3 /usr/share/koha/bin/cronjobs/runreport.pl --to='qvh.library@nhs.net' --subject='Borrowers moved from QVH in past 7 days' -a --format=csv --csv-header 156 >/dev/null 2>&1
7 3 * * 3 /usr/share/koha/bin/cronjobs/runreport.pl --to='UHSussex.library@nhs.net' --subject='Borrowers moved from MD in past 7 days' -a --format=csv --csv-header 155 >/dev/null 2>&1
8 3 * * 3 /usr/share/koha/bin/cronjobs/runreport.pl --to='ekh-tr.whhlibrary@nhs.net' --subject='Borrowers moved from KWH in past 7 days' -a --format=csv --csv-header 154 >/dev/null 2>&1
9 3 * * 3 /usr/share/koha/bin/cronjobs/runreport.pl --to='mtw-tr.library@nhs.net' --subject='Borrowers moved from KTW in past 7 days' -a --format=csv --csv-header 153 >/dev/null 2>&1
10 3 * * 3 /usr/share/koha/bin/cronjobs/runreport.pl --to='mtw-tr.library@nhs.net' --subject='Borrowers moved from KMS in past 7 days' -a --format=csv --csv-header 152 >/dev/null 2>&1
11 3 * * 3 /usr/share/koha/bin/cronjobs/runreport.pl --to='trust.library@nhs.net' --subject='Borrowers moved from KMD in past 7 days' -a --format=csv --csv-header 151 >/dev/null 2>&1
12 3 * * 3 /usr/share/koha/bin/cronjobs/runreport.pl --to='ekh-tr.qeqmlibrary@nhs.net' --subject='Borrowers moved from KMA in past 7 days' -a --format=csv --csv-header 150 >/dev/null 2>&1
13 3 * * 3 /usr/share/koha/bin/cronjobs/runreport.pl --to='ekh-tr.kchlibrary@nhs.net' --subject='Borrowers moved from KCH in past 7 days' -a --format=csv --csv-header 149 >/dev/null 2>&1
14 3 * * 3 /usr/share/koha/bin/cronjobs/runreport.pl --to='rsc-tr.library@nhs.net' --subject='Borrowers moved from GU in past 7 days' -a --format=csv --csv-header 148 >/dev/null 2>&1
15 3 * * 3 /usr/share/koha/bin/cronjobs/runreport.pl --to='librarycrawley@nhs.net' --subject='Borrowers moved from ESC in past 7 days' -a --format=csv --csv-header 147 >/dev/null 2>&1
16 3 * * 3 /usr/share/koha/bin/cronjobs/runreport.pl --to='library.esh@nhs.net' --subject='Borrowers moved from ES in past 7 days' -a --format=csv --csv-header 146 >/dev/null 2>&1
17 3 * * 3 /usr/share/koha/bin/cronjobs/runreport.pl --to='library.dvh@nhs.net' --subject='Borrowers moved from DVH in past 7 days' -a --format=csv --csv-header 145 >/dev/null 2>&1
18 3 * * 3 /usr/share/koha/bin/cronjobs/runreport.pl --to='uhsussex.dunhill.library@nhs.net' --subject='Borrowers moved from CR in past 7 days' -a --format=csv --csv-header 144 >/dev/null 2>&1

0 4 1 * * /usr/share/koha/bin/cronjobs/runreport.pl --to='susan.merner@nhs.net' --subject='New items added with bib details and subject' -a --format=csv --csv-header 214 >/dev/null 2>&1

1 7 1 * * /usr/share/koha/bin/cronjobs/runreport.pl --to='librarycrawley@nhs.net, library.esh@nhs.net' --subject='Expiring ES/ESC users with loans/fobs' -a --format=csv --csv-header 318 >/dev/null 2>&1

# Patron emailer
0 6 * * * /usr/share/koha/bin/cronjobs/patron_emailer.pl --report 184 --notice LIBCHANGESBRP --module members -commit > /tmp/patron_emailer.log 2>&1
1 6 * * * /usr/share/koha/bin/cronjobs/patron_emailer.pl --report 183 --notice LIBCHANGESHS --module members -commit > /tmp/patron_emailer.log 2>&1
2 6 * * * /usr/share/koha/bin/cronjobs/patron_emailer.pl --report 182 --notice LIBCHANGESBR --module members -commit > /tmp/patron_emailer.log 2>&1
3 6 * * * /usr/share/koha/bin/cronjobs/patron_emailer.pl --report 181 --notice LIBCHANGESBN --module members -commit > /tmp/patron_emailer.log 2>&1
4 6 * * * /usr/share/koha/bin/cronjobs/patron_emailer.pl --report 180 --notice LIBCHANGEMD --module members -commit > /tmp/patron_emailer.log 2>&1
5 6 * * * /usr/share/koha/bin/cronjobs/patron_emailer.pl --report 179 --notice LIBCHANGEKMS --module members -commit > /tmp/patron_emailer.log 2>&1
6 6 * * * /usr/share/koha/bin/cronjobs/patron_emailer.pl --report 178 --notice LIBCHANGEGU --module members -commit > /tmp/patron_emailer.log 2>&1
7 6 * * * /usr/share/koha/bin/cronjobs/patron_emailer.pl --report 177 --notice LIBCHANGEKTW --module members -commit > /tmp/patron_emailer.log 2>&1
8 6 * * * /usr/share/koha/bin/cronjobs/patron_emailer.pl --report 176 --notice LIBCHANGEALL --module members -commit > /tmp/patron_emailer.log 2>&1
9 6 * * * /usr/share/koha/bin/cronjobs/patron_emailer.pl --report 262 --notice MEMBERFLLWP_KMS --module members -commit > /tmp/patron_emailer.log 2>&1
10 6 * * * /usr/share/koha/bin/cronjobs/patron_emailer.pl --report 244 --notice MEMBERFLLWP_KTW --module members -commit > /tmp/patron_emailer.log 2>&1
